parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"efjR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=void 0;var e=function(){function e(){}return e.init=function(e){var t=this,s=e.getBoundingClientRect();e.addEventListener("mousemove",function(e){t.mouse.x=e.clientX-s.left,t.mouse.y=e.clientY-s.top}),e.addEventListener("click",function(e){t.handleClicks()}),window.addEventListener("keydown",function(e){"Escape"==e.code&&(t.escPressed=!t.escPressed)})},e.handleClicks=function(){for(var e=0,t=this.clickEvents;e<t.length;e++){var s=t[e];this.mouse.x>s.s.x&&this.mouse.y>s.s.y&&this.mouse.x<s.e.x&&this.mouse.y<s.e.y&&s.callback()}},e.mouse={x:0,y:0},e.escPressed=!1,e.clickEvents=[],e}();exports.Input=e;
},{}],"b7LN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Renderer=void 0;var t=require("./input.js");function e(t){return document.getElementById(t)}var s=function(){function s(){}return s.draw=function(t,e,s,o){o&&o.opacity>=0&&(this.ctx.globalAlpha=o.opacity),o&&o.rotation?(this.ctx.save(),this.ctx.translate(e+t.w/2,s+t.h/2),this.ctx.rotate(o.rotation*Math.PI/180),this.ctx.translate(-e-t.w/2,-s-t.h/2),this.ctx.drawImage(t.img,e,s),this.ctx.restore()):this.ctx.drawImage(t.img,e,s),this.ctx.globalAlpha=1},s.drawText=function(t,e,s,o,i){this.ctx.font=s+"px Kelly Slab",this.ctx.fillStyle=o,this.ctx.textAlign="center";var r=e.x+(i&&i.offsetX?i.offsetX:0),a=e.y+(i&&i.offsetY?i.offsetY:0);i&&i.opacity>=0&&(this.ctx.globalAlpha=i.opacity),this.ctx.fillText(t,r,a),this.ctx.globalAlpha=1},s.drawTextures=function(){for(var e=0,s=this.textures;e<s.length;e++){var o=s[e];if(o.condition){if(o.condition()){this.draw(o.pic,o.pos.x,o.pos.y,o.mod?o.mod:void 0);continue}}else o.hover?t.Input.mouse.x>o.pos.x&&t.Input.mouse.y>o.pos.y&&t.Input.mouse.x<o.pos.x+o.pic.w&&t.Input.mouse.y<o.pos.y+o.pic.h&&this.draw(o.pic,o.pos.x,o.pos.y):this.draw(o.pic,o.pos.x,o.pos.y)}},s.drawRect=function(t,e,s,o){this.ctx.fillStyle=o,this.ctx.fillRect(t.x,t.y,e,s)},s.drawRects=function(){for(var t=0,e=this.shapes;t<e.length;t++){var s=e[t];this.drawRect(s.pos,s.w(),s.h,s.color)}},s.drawTexts=function(){for(var t=0,e=this.texts;t<e.length;t++){var s=e[t];if(s.multiline)for(var o=s.text.split("\n"),i=Object.assign({},s.pos),r=0,a=o.length;r<a;r++)this.drawText(o[r],i,s.size,s.color),i.y+=s.size;else s.ctext?this.drawText(s.ctext(),s.pos,s.size,s.color,s.mod):this.drawText(s.text,s.pos,s.size,s.color,s.mod)}},s.drawLoop=function(){s.drawTextures(),s.drawRects(),s.drawTexts(),requestAnimationFrame(s.drawLoop)},s.ctx=e("cvs").getContext("2d"),s.textures=[],s.texts=[],s.shapes=[],s}();exports.Renderer=s,t.Input.init(e("cvs"));
},{"./input.js":"efjR"}],"FOZT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;var t=function(){function t(){}return t.rng=function(t,r){return Math.floor(Math.random()*(r-t+1)+t)},t.calcPixels=function(t,r,e){return Math.floor(100*t/r*e/100)},t}();exports.Utils=t;
},{}],"Ze5K":[function(require,module,exports) {
"use strict";var e,t,a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.turn=exports.gameType=exports.menuState=void 0,exports.menuState=e,function(e){e[e.MainMenu=0]="MainMenu",e[e.SinglePlayerGame=1]="SinglePlayerGame",e[e.MPLobby=2]="MPLobby",e[e.PlayerSelect=3]="PlayerSelect",e[e.MPGame=4]="MPGame",e[e.GameEnd=5]="GameEnd",e[e.Rules=6]="Rules"}(e||(exports.menuState=e={})),exports.gameType=t,function(e){e[e.SinglePlayer=0]="SinglePlayer",e[e.MultiPlyaer=1]="MultiPlyaer"}(t||(exports.gameType=t={})),exports.turn=a,function(e){e[e.Upgrade=0]="Upgrade",e[e.Battle=1]="Battle"}(a||(exports.turn=a={}));
},{}],"NZ5N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameState=void 0;var e=function(){return function(){}}();exports.GameState=e;
},{}],"qbJK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var t=function(){function t(t){this.HP=2e3,this.maxHP=2e3,this.animHP=0,this.maxMana=10,this.mana=10,this.animMana=0,this.hero=t,this.attack=100,this.defense=100,this.isAttacking=!1,this.isDefending=!1,this.specialUsed=!1}return t.prototype.isDead=function(){return this.HP<=0},t}();exports.Player=t;
},{}],"dmzp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Animator=void 0;var t=function(){function t(){}return t.animateBar=function(t,o,a,i){for(var n=0,r=this.barAnimations;n<r.length;n++){var e=r[n];a==e[1]&&i==e[2]&&(clearInterval(e[0]),t=a[i],this.barAnimations.splice(this.barAnimations.indexOf(e),1))}var m=t>o?-1:1,s=Math.abs(t-o),d=m*(s/100),c=setInterval(function(){if(a[i]===o||1==m&&o<a[i]||-1==m&&o>a[i])return a[i]=o,void clearInterval(c);a[i]=a[i]+d},m>0?3:1);this.barAnimations.push([c,a,i])},t.appear=function(t,o){var a=setInterval(function(){t.mod&&t.mod.opacity&&(t.mod.opacity+=o,t.mod.opacity>=1&&(t.mod.opacity=1,clearInterval(a)))},10)},t.animatePlayerSwordAttack=function(t,o,a){var i=t.pos.x,n=t.pos.y,r=t.mod&&t.mod.rotation?t.mod.rotation:0,e=.1,m=.001,s=0,d=setInterval(function(){if(++s<60)return m+=.02,void(t.mod&&(t.mod.opacity=m));s<75-a?(t.pos.y-=20*(1+Math.sin(e))*o,t.pos.x-=20*Math.sin(e)*o):(e>2.5&&(e=.4),t.mod&&t.mod.targetRotation&&void 0!==t.mod.rotation&&t.mod.rotation<t.mod.targetRotation&&(t.mod.rotation+=6*(1+Math.sin(e)),t.pos.x+=10*(1+Math.sin(e))*o),t.mod&&((m-=.1)<0&&(m=.001,clearInterval(d),t.pos.y=n,t.pos.x=i,t.mod.rotation=r),t.mod.opacity=m)),e+=.01},10)},t.animateTextAppearDisappear=function(t,o){var a=0,i=0,n=0,r=setInterval(function(){if(!t.mod)return clearInterval(r);a>60&&a<80?(i+=.05,t.mod.opacity+=t.mod.opacity<1?i:0):a>80&&(t.mod.opacity-=t.mod.opacity>.01?.01:0,n+=.005),t.mod.offsetY+=n*o,a>180&&(clearInterval(r),t.mod.opacity=0,t.mod.offsetY=0,t.text=""),a++},10)},t.barAnimations=[],t}();exports.Animator=t;
},{}],"EPKu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Multiplayer=void 0;var e=require("./view.js"),t=require("./enums.js"),o=require("./gamestate.js"),n=require("./game.js"),r=require("./heroes.js"),i=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{c(n.next(e))}catch(t){i(t)}}function a(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},s=function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=function(){function a(){}return a.setupNickname=function(){return i(this,void 0,void 0,function(){var t;return s(this,function(o){switch(o.label){case 0:return this.nickname?[3,3]:null===(t=prompt(e.locale.ASKNAME))?[3,1]:(this.nickname=t.replace(/[^A-z0-9_ -]/gim,""),0===this.nickname.length&&(this.nickname="Unknown"+(new Date).getMilliseconds()),[3,3]);case 1:return[4,this.setupNickname()];case 2:o.sent(),o.label=3;case 3:return[2]}})})},a.announce=function(){var e=this,t=(new Date).getTime(),o=setInterval(function(){e.lobbyserver.send(JSON.stringify({g:"tbab",room:e.nickname,t:t})),!e.room.opponentName&&e.roomCreated||clearInterval(o)},2e3)},a.createRoom=function(){var e=this;this.roomCreated||(this.announce(),this.roomserver=new WebSocket(this.server+this.nickname),this.roomserver.onmessage=function(t){return e.gameMessageWorker(t)},this.roomCreated=!0)},a.destroyRoom=function(){this.roomserver&&this.roomserver.close(),this.roomCreated&&(this.roomCreated=!1)},a.updateRoomInfo=function(){this.roomDataList=this.roomDataList.filter(function(e){return(new Date).getTime()-e.t<2e5}).sort()},a.getRoomData=function(e){return e>=this.roomDataList.length?{room:""}:this.roomDataList[e]},a.getServerInfoFunction=function(e){var t=this;return function(){return t.getRoomData(e).room}},a.getServerSelectFunction=function(e){var t=this;return function(){return t.selectRoom(e)}},a.connect=function(){var e=this;this.room={opponentName:"",opponentHero:!1},this.roomList=[],this.lobbyserver||(this.lobbyserver=new WebSocket(this.server+"lobby"),this.lobbyserver.onmessage=function(t){try{var o=JSON.parse(t.data);o.g&&!e.roomList.includes(o.g+o.room+o.t)&&(e.roomList.push(o.g+o.room+o.t),e.roomDataList.push(o))}catch(n){console.error(n)}})},a.selectRoom=function(e){var t=this;this.destroyRoom(),this.roomserver=new WebSocket(this.server+this.roomDataList[e].room),this.roomserver.onopen=function(){t.roomserver.send(JSON.stringify({type:"join",obj:t.nickname})),t.roomserver.onmessage=function(e){return t.gameMessageWorker(e)}}},a.getHero=function(){var e=this;return new Promise(function(t,o){setInterval(function(){e.room.opponentHero&&t(e.room.opponentHero)})})},a.gameMessageWorker=function(i){var s={type:"",obj:!1};try{s=JSON.parse(i.data)}catch(c){console.error(c)}switch(s.type){case"join":this.room.opponentName?this.roomserver.send(JSON.stringify({type:"decline",obj:this.nickname})):(this.room.opponentName=s.obj,this.roomserver.send(JSON.stringify({type:"accept",obj:this.nickname})),e.View.changeState(t.menuState.PlayerSelect));break;case"accept":if(this.room.opponentName)return;this.room.opponentName=s.obj,e.View.changeState(t.menuState.PlayerSelect);break;case"decline":if(this.room.opponentName)return;alert(e.locale.ROOMFULL),this.roomserver.close();break;case"selecthero":if(this.room.opponentHero)return;for(var a in r.Heroes.list)r.Heroes.list[a].pic.name==s.obj&&(this.room.opponentHero=r.Heroes.list[a]);break;case"syncstate":o.GameState.opponent.attack=s.obj.attack,o.GameState.opponent.defense=s.obj.defense,o.GameState.opponent.isAttacking=s.obj.isAttacking,o.GameState.opponent.isDefending=s.obj.isDefending,o.GameState.opponent.hero=s.obj.hero,n.Game.removeHP(o.GameState.opponent,o.GameState.opponent.HP-s.obj.HP),n.Game.startBattle()}},a.server="wss://connect.websocket.in/tbab?room_id=",a.nickname="",a.roomList=[],a.roomCreated=!1,a.roomDataList=[],a}();exports.Multiplayer=a;
},{"./view.js":"hDRN","./enums.js":"Ze5K","./gamestate.js":"NZ5N","./game.js":"QcRT","./heroes.js":"O7Ru"}],"QcRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("./renderer.js"),t=require("./view.js"),a=require("./enums.js"),n=require("./gamestate.js"),r=require("./heroes.js"),i=require("./player.js"),o=require("./animator.js"),m=require("./utils.js"),p=require("./multiplayer.js"),s=function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function o(e){try{p(n.next(e))}catch(t){i(t)}}function m(e){try{p(n.throw(e))}catch(t){i(t)}}function p(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(o,m)}p((n=n.apply(e,t||[])).next())})},l=function(e,t){var a,n,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function m(i){return function(m){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(m){i=[6,m],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,m])}}},u=function(){function u(){}return u.start=function(){t.View.changeState(a.menuState.MainMenu),e.Renderer.drawLoop()},u.startMatch=function(e){return s(this,void 0,void 0,function(){var m,s;return l(this,function(l){switch(l.label){case 0:return n.GameState.player=new i.Player(e),n.GameState.turnTimer=4,n.GameState.matchtype!=a.gameType.SinglePlayer?[3,1]:(n.GameState.running=!0,n.GameState.opponent=new i.Player(r.Heroes.getRandomHero()),t.View.changeState(a.menuState.SinglePlayerGame),[3,3]);case 1:return n.GameState.running=!0,p.Multiplayer.roomserver.send(JSON.stringify({type:"selecthero",obj:e.pic.name})),m=n.GameState,s=i.Player.bind,[4,p.Multiplayer.getHero()];case 2:m.opponent=new(s.apply(i.Player,[void 0,l.sent()])),t.View.changeState(a.menuState.MPGame),n.GameState.turnTimerInterval=setInterval(function(){n.GameState.turnTimer>0&&(n.GameState.turnTimer-=1)},1e3),n.GameState.syncInterval=setInterval(function(){return p.Multiplayer.roomserver.send(JSON.stringify({type:"syncstate",obj:n.GameState.player}))},7e3),l.label=3;case 3:return o.Animator.animateBar(0,n.GameState.player.maxHP,n.GameState.player,"animHP"),o.Animator.animateBar(0,n.GameState.player.maxMana,n.GameState.player,"animMana"),o.Animator.animateBar(0,n.GameState.opponent.maxHP,n.GameState.opponent,"animHP"),[2]}})})},u.AIMove=function(){1==m.Utils.rng(0,1)?(this.atkBuff(n.GameState.opponent),n.GameState.opponent.isAttacking=!0):(this.defBuff(n.GameState.opponent),n.GameState.opponent.isDefending=!0),1==m.Utils.rng(0,1)?this.atkBuff(n.GameState.opponent):1==m.Utils.rng(0,1)?this.defBuff(n.GameState.opponent):this.atkdefBuff(n.GameState.opponent)},u.startBattle=function(){var e,r=this;(n.GameState.matchtype==a.gameType.SinglePlayer&&this.AIMove(),n.GameState.matchturn=a.turn.Battle,t.View.MTexts.OpponentHPDiff.text="-0",n.GameState.player.isDefending&&o.Animator.appear(t.View.MTextures.PlayerShield,.05),n.GameState.opponent.isDefending&&o.Animator.appear(t.View.MTextures.OpponentShield,.05),n.GameState.player.isAttacking&&!n.GameState.opponent.isDefending&&(o.Animator.animatePlayerSwordAttack(t.View.MTextures.PlayerSword,1,0),this.removeHP(n.GameState.opponent,n.GameState.player.attack),t.View.MTexts.OpponentHPDiff.text="-"+n.GameState.player.attack),n.GameState.player.isAttacking&&n.GameState.opponent.isDefending)&&(o.Animator.animatePlayerSwordAttack(t.View.MTextures.PlayerSword,1,4),e=(e=n.GameState.player.attack-n.GameState.opponent.defense)>0?e:0,this.removeHP(n.GameState.opponent,e),t.View.MTexts.OpponentDamageRecieved.text=" "+n.GameState.player.attack,t.View.MTexts.OpponentDefenseBlocked.text="-"+n.GameState.opponent.defense,o.Animator.animateTextAppearDisappear(t.View.MTexts.OpponentDamageRecieved,-1),o.Animator.animateTextAppearDisappear(t.View.MTexts.OpponentDefenseBlocked,-1),t.View.MTexts.OpponentHPDiff.text="-"+e);(o.Animator.animateTextAppearDisappear(t.View.MTexts.OpponentHPDiff,1),t.View.MTexts.PlayerHPDiff.text="-0",n.GameState.opponent.isAttacking&&!n.GameState.player.isDefending&&(o.Animator.animatePlayerSwordAttack(t.View.MTextures.OpponentSword,-1,0),this.removeHP(n.GameState.player,n.GameState.opponent.attack),t.View.MTexts.PlayerHPDiff.text="-"+n.GameState.opponent.attack),n.GameState.opponent.isAttacking&&n.GameState.player.isDefending)&&(o.Animator.animatePlayerSwordAttack(t.View.MTextures.OpponentSword,-1,4),e=(e=n.GameState.opponent.attack-n.GameState.player.defense)>0?e:0,this.removeHP(n.GameState.player,e),t.View.MTexts.PlayerDamageRecieved.text=" "+n.GameState.opponent.attack,t.View.MTexts.PlayerDefenseBlocked.text="-"+n.GameState.player.defense,o.Animator.animateTextAppearDisappear(t.View.MTexts.PlayerDamageRecieved,-1),o.Animator.animateTextAppearDisappear(t.View.MTexts.PlayerDefenseBlocked,-1),t.View.MTexts.PlayerHPDiff.text="-"+e);o.Animator.animateTextAppearDisappear(t.View.MTexts.PlayerHPDiff,-1),setTimeout(function(){return r.endBattle()},3e3)},u.endBattle=function(){n.GameState.matchturn=a.turn.Upgrade,n.GameState.turnTimer=4,n.GameState.player.isDead()&&n.GameState.opponent.isDead()?n.GameState.result=t.locale.TIE:(n.GameState.player.isDead()&&(n.GameState.result=t.locale.LOSS),n.GameState.opponent.isDead()&&(n.GameState.result=t.locale.WIN)),(n.GameState.player.isDead()||n.GameState.opponent.isDead())&&(n.GameState.syncInterval&&clearInterval(n.GameState.syncInterval),n.GameState.turnTimerInterval&&clearInterval(n.GameState.turnTimerInterval),n.GameState.running=!1,t.View.changeState(a.menuState.GameEnd)),n.GameState.player.isDefending=!1,n.GameState.player.isAttacking=!1,n.GameState.player.specialUsed=!1,n.GameState.opponent.isAttacking=!1,n.GameState.opponent.isDefending=!1,n.GameState.opponent.specialUsed=!1,this.removeMana(n.GameState.player,-1*(n.GameState.player.maxMana-n.GameState.player.mana)),n.GameState.opponent.mana=n.GameState.opponent.maxMana},u.atkBuff=function(e){e.mana>=5&&n.GameState.matchturn!=a.turn.Battle&&(this.removeMana(e,5),e.attack=Math.round(1.1*e.attack))},u.defBuff=function(e){e.mana>=5&&n.GameState.matchturn!=a.turn.Battle&&(this.removeMana(e,5),e.defense=Math.round(1.1*e.defense))},u.atkdefBuff=function(e){e.mana>=5&&n.GameState.matchturn!=a.turn.Battle&&(this.removeMana(e,5),e.attack=Math.round(1.05*e.attack),e.defense=Math.round(1.05*e.defense))},u.special=function(e){n.GameState.matchturn!=a.turn.Battle&&e.mana>=e.hero.specialCost&&(u.removeMana(e,e.hero.specialCost),e.hero.special(e),e.specialUsed=!0)},u.attack=function(e){e.isAttacking||e.isDefending||(e.isAttacking=!0),n.GameState.matchtype==a.gameType.SinglePlayer&&n.GameState.matchturn!=a.turn.Battle&&this.startBattle()},u.defend=function(e){e.isDefending||e.isAttacking||(e.isDefending=!0),n.GameState.matchtype==a.gameType.SinglePlayer&&n.GameState.matchturn!=a.turn.Battle&&this.startBattle()},u.removeMana=function(e,t){o.Animator.animateBar(e.mana,e.mana-t,e,"animMana"),e.mana-=t},u.removeHP=function(e,t){var a=e.HP,n=a-t;n>e.maxHP&&(n=e.maxHP),setTimeout(function(){return o.Animator.animateBar(a,n>=0?n:0,e,"animHP")},1700),e.HP-=t},u}();exports.Game=u;
},{"./renderer.js":"b7LN","./view.js":"hDRN","./enums.js":"Ze5K","./gamestate.js":"NZ5N","./heroes.js":"O7Ru","./player.js":"qbJK","./animator.js":"dmzp","./utils.js":"FOZT","./multiplayer.js":"EPKu"}],"O7Ru":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Heroes=void 0;var e=require("./view.js"),a=require("./utils.js"),i=require("./game.js"),t=function(){function t(){}return t.init=function(){this.list.FROG={name:e.locale.HEROES.FROG.NAME,power:e.locale.HEROES.FROG.POWER,special:function(e){e.maxMana+=1},specialCost:6,pic:e.View.pics.hero1},this.list.DOG={name:e.locale.HEROES.DOG.NAME,power:e.locale.HEROES.DOG.POWER,special:function(e){e.attack+=Math.round(.3*e.attack)},specialCost:10,pic:e.View.pics.hero2},this.list.CAT={name:e.locale.HEROES.CAT.NAME,power:e.locale.HEROES.CAT.POWER,special:function(e){!e.specialUsed&&e.HP>e.attack&&(i.Game.removeHP(e,e.attack),i.Game.removeMana(e,-1*(e.maxMana-e.mana)))},specialCost:0,pic:e.View.pics.hero3},this.list.CHICK={name:e.locale.HEROES.CHICK.NAME,power:e.locale.HEROES.CHICK.POWER,special:function(e){var a=e.attack;e.attack=e.defense,e.defense=a},specialCost:2,pic:e.View.pics.hero4},this.list.FISH={name:e.locale.HEROES.FISH.NAME,power:e.locale.HEROES.FISH.POWER,special:function(e){i.Game.removeHP(e,Math.round(-e.attack/2))},specialCost:4,pic:e.View.pics.hero5},this.list.MONKEY={name:e.locale.HEROES.MONKEY.NAME,power:e.locale.HEROES.MONKEY.POWER,special:function(e){i.Game.removeHP(e,-e.defense)},specialCost:10,pic:e.View.pics.hero6}},t.getRandomHero=function(){var e=["FROG","DOG","CAT","CHICK","FISH","MONKEY"],i=e[a.Utils.rng(0,e.length-1)];return this.list[i]},t.list={},t}();exports.Heroes=t;
},{"./view.js":"hDRN","./utils.js":"FOZT","./game.js":"QcRT"}],"nKWc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENlocale=exports.RUlocale=void 0;var e={_lang:"RU",SP:"Одиночная игра",MP:"Сетевая игра",RULES:"Правила",RULESTEXT:"Игра состоит из этапа подготовки и этапа боя. У каждого игрока на этапе  \nподготовки есть возможность улучшить свои показатели за счёт маны, а \nтакже использовать собстенную способность. После чего нужно выбрать \nдействие игрока (атака или защита). \n\nНа этапе боя наносимый во время атаки урон сравнивается с показателем \nзаищты. Цель игры - победить противника, нанеся ему летальный урон,\n и при этом выжить.\n\nВ одиночной игре бой начинется при выборе действия (атаки или защиты),\n а в сетевой это происходит по таймеру.",BACK:"Назад в меню",CREATEROOM:"Создать комнату",SELECT:"ВЫБЕРЕТЕ",HERO:"ПЕРСОНАЖА",HEROES:{FROG:{NAME:"Лягух",POWER:"Ваша максимальная мана увеличивается на 1"},DOG:{NAME:"Пёс",POWER:"Вы получаете +30% к атаке"},CAT:{NAME:"Кот",POWER:"Вы наносите себе урон, равный атаке героя,\n восстанавливая всю ману"},CHICK:{NAME:"Цыпа",POWER:"Меняет местами показатели атаки и защиты"},FISH:{NAME:"Рыба",POWER:"Восстанавливает здоровье (50% от атаки)"},MONKEY:{NAME:"Макака",POWER:"Восстанавливает здоровье (100% от защиты)"}},UPGRADE:"ПОДГОТОВКА",BATTLE:"БИТВА",WIN:"Победа!\nУра! Вы победили.",LOSS:"Поражение\nЧто поделать, в другой раз всё получится!",TIE:"Ничья!\nВозможно стоит сменить тактику?",ASKNAME:"Введите ваш никнейм",ROOMFULL:"Эта комната уже занята!",ROOMCREATED:"Комната создана.",WAITING:"ЖДЁМ"};exports.RUlocale=e;var a={_lang:"EN",SP:"Singleplayer",MP:"Multiplayer",RULES:"Rules",RULESTEXT:"The game has two stages. During the upgrade stage you can increase your stats \nand use your special ability. You have to choose if you want to attack or defend\n in the upcoming battle. \n\nDuring the battle stage, every player deals damage matching it's attack points. \nDefense mode decreases that damage by the amount of defense points. \n\nThe goal is to deal critical damage to your opponent and stay alive. \nIn singleplayer game, attack/defense mode choice changes game stage.\n In multiplayer it's based on a timer.",BACK:"Back to menu",CREATEROOM:"Create new room",SELECT:"SELECT",HERO:"CHARACTER",HEROES:{FROG:{NAME:"Frog",POWER:"Increases your max. mana by 1"},DOG:{NAME:"Dog",POWER:"Your hero gains 30% of your attack damage"},CAT:{NAME:"Cat",POWER:"Deals attack damage to your hero. Restores mana."},CHICK:{NAME:"Chick",POWER:"Swaps your attack & defense points"},FISH:{NAME:"Fish",POWER:"Restores HP by 50% of your attack points"},MONKEY:{NAME:"Monkey",POWER:"Restores HP by the amount of your defense"}},UPGRADE:"UPGRADE",BATTLE:"BATTLE",WIN:"Congratulations!\nYou won!",LOSS:"Defeat!\n This is a lost round, but you can do better in another one",TIE:"A tie!\n Maybe you should use another strategy?",ASKNAME:"Enter your name",ROOMFULL:"This room is already full!",ROOMCREATED:"Room created.",WAITING:"WAIT"};exports.ENlocale=a;
},{}],"hDRN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.View=exports.locale=void 0;var e=require("./renderer.js"),t=require("./input.js"),n=require("./heroes.js"),o=require("./game.js"),a=require("./gamestate.js"),r=require("./utils.js"),i=require("./multiplayer.js"),c=require("./enums.js"),s=l(require("./locale.js"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(n,a,r):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var u=function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},y=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},x=window.navigator.languages.includes("ru")||window.navigator.languages.includes("ru-RU")?s.RUlocale:s.ENlocale;exports.locale=x;var f=function(){function s(){}return s.loadPics=function(e){return u(this,void 0,void 0,function(){var t,o,a,r,i,c;return y(this,function(s){for(t=[],o=function(e){var n=new Image(e.w,e.h);t.push(new Promise(function(e,t){n.onload=function(t){return e()}})),n.src=e.url,a.pics[e.name]={url:e.url,w:e.w,h:e.h,name:e.name,img:n}},a=this,r=0,i=e;r<i.length;r++)c=i[r],o(c);return n.Heroes.init(),this.initDynamicObjects(),[2,Promise.all(t)]})})},s.initDynamicObjects=function(){this.MTextures={PlayerSword:{pic:this.pics.sword_small_up,pos:{x:610,y:485},condition:function(){return a.GameState.player.isAttacking},mod:{targetRotation:100,rotation:0,opacity:.001}},PlayerShield:{pic:this.pics.shield_small,pos:{x:620,y:490},condition:function(){return a.GameState.player.isDefending},mod:{opacity:.001}},OpponentSword:{pic:this.pics.sword_small_up,pos:{x:610,y:215},condition:function(){return a.GameState.opponent.isAttacking},mod:{rotation:180,targetRotation:270,opacity:.001}},OpponentShield:{pic:this.pics.shield_small,pos:{x:620,y:215},condition:function(){return a.GameState.opponent.isDefending},mod:{opacity:.001}}},this.MTexts={PlayerDamageRecieved:{text:"",pos:{x:680,y:510},size:14,color:"#fff",mod:{opacity:0,offsetY:0,offsetX:0}},PlayerDefenseBlocked:{text:"",pos:{x:680,y:530},size:15,color:"#fff",mod:{opacity:0,offsetY:0,offsetX:0}},PlayerHPDiff:{text:" ",pos:{x:1240,y:572},size:14,color:"#5f220a",mod:{opacity:0,offsetY:0,offsetX:0}},OpponentDamageRecieved:{text:"",pos:{x:600,y:240},size:14,color:"#fff",mod:{opacity:0,offsetY:0,offsetX:0}},OpponentDefenseBlocked:{text:"",pos:{x:600,y:260},size:15,color:"#fff",mod:{opacity:0,offsetY:0,offsetX:0}},OpponentHPDiff:{text:"",pos:{x:720,y:52},size:14,color:"#5f220a",mod:{opacity:0,offsetY:0,offsetX:0}}}},s.validateMenuStateChange=function(e,t){switch(e){case c.menuState.MainMenu:return[c.menuState.MPLobby,c.menuState.PlayerSelect,c.menuState.MainMenu,c.menuState.Rules].includes(t);case c.menuState.Rules:return[c.menuState.MainMenu].includes(t);case c.menuState.PlayerSelect:return[c.menuState.SinglePlayerGame,c.menuState.MPGame].includes(t);case c.menuState.SinglePlayerGame:return[c.menuState.GameEnd,c.menuState.MainMenu].includes(t);case c.menuState.MPLobby:return[c.menuState.MainMenu,c.menuState.PlayerSelect].includes(t);case c.menuState.MPGame:return[c.menuState.GameEnd,c.menuState.MainMenu].includes(t);case c.menuState.GameEnd:return[c.menuState.MainMenu].includes(t)}return!1},s.changeState=function(p){var l=this;if(this.validateMenuStateChange(this.currentState,p)){switch(p){case c.menuState.MainMenu:a.GameState.running=!1,e.Renderer.textures=[{pic:s.pics.tbab_main_menu,pos:{x:0,y:0}},{pic:s.pics.button_main,pos:{x:380,y:200}},{pic:s.pics.button_main_hover,pos:{x:380,y:200},hover:!0},{pic:s.pics.button_main,pos:{x:380,y:320}},{pic:s.pics.button_main_hover,pos:{x:380,y:320},hover:!0},{pic:s.pics.button_main,pos:{x:380,y:440}},{pic:s.pics.button_main_hover,pos:{x:380,y:440},hover:!0}],e.Renderer.texts=[{text:x.SP,pos:{x:640,y:252},size:30,color:"#5f220a"},{text:x.MP,pos:{x:640,y:372},size:30,color:"#5f220a"},{text:x.RULES,pos:{x:640,y:492},size:30,color:"#5f220a"}],t.Input.clickEvents=[{s:{x:380,y:200},e:{x:897,y:282},callback:function(){l.changeState(c.menuState.PlayerSelect),a.GameState.matchtype=c.gameType.SinglePlayer}},{s:{x:380,y:320},e:{x:897,y:402},callback:function(){l.changeState(c.menuState.MPLobby),a.GameState.matchtype=c.gameType.MultiPlyaer}},{s:{x:380,y:440},e:{x:897,y:522},callback:function(){l.changeState(c.menuState.Rules)}}],e.Renderer.shapes=[];break;case c.menuState.Rules:e.Renderer.textures=[{pic:s.pics.mp_menu,pos:{x:0,y:0}},{pic:s.pics.button_main,pos:{x:30,y:10}},{pic:s.pics.button_main_hover,pos:{x:30,y:10},hover:!0}],e.Renderer.texts=[{text:x.BACK,pos:{x:293,y:62},size:30,color:"#5f220a"},{text:x.RULESTEXT,pos:{x:640,y:200},size:30,color:"#000",multiline:!0}],t.Input.clickEvents=[{s:{x:30,y:10},e:{x:547,y:92},callback:function(){l.changeState(c.menuState.MainMenu)}}];break;case c.menuState.GameEnd:e.Renderer.textures=[{pic:s.pics.mp_menu,pos:{x:0,y:0}},{pic:s.pics.button_main,pos:{x:30,y:10}},{pic:s.pics.button_main_hover,pos:{x:30,y:10},hover:!0}],e.Renderer.texts=[{text:x.BACK,pos:{x:293,y:62},size:30,color:"#5f220a"},{text:a.GameState.result,pos:{x:640,y:200},size:30,color:"#000",multiline:!0}],t.Input.clickEvents=[{s:{x:30,y:10},e:{x:547,y:92},callback:function(){l.changeState(c.menuState.MainMenu)}}],e.Renderer.shapes=[];break;case c.menuState.MPLobby:i.Multiplayer.setupNickname(),i.Multiplayer.connect(),e.Renderer.textures=[{pic:s.pics.mp_menu,pos:{x:0,y:0}},{pic:s.pics.button_main,pos:{x:30,y:10}},{pic:s.pics.button_main_hover,pos:{x:30,y:10},hover:!0},{pic:s.pics.button_main,pos:{x:730,y:10},condition:function(){return!i.Multiplayer.roomCreated}},{pic:s.pics.button_main_hover,pos:{x:730,y:10},hover:!0},{pic:s.pics.button_main_hover,pos:{x:730,y:10},condition:function(){return i.Multiplayer.roomCreated}}],e.Renderer.texts=[{text:x.BACK,pos:{x:293,y:62},size:30,color:"#5f220a"},{text:"",ctext:function(){return i.Multiplayer.roomCreated?x.ROOMCREATED:x.CREATEROOM},pos:{x:988,y:62},size:30,color:"#5f220a"}],t.Input.clickEvents=[{s:{x:30,y:10},e:{x:547,y:92},callback:function(){i.Multiplayer.destroyRoom(),l.changeState(c.menuState.MainMenu)}},{s:{x:730,y:10},e:{x:1247,y:92},callback:function(){i.Multiplayer.createRoom()}}];for(var u=0;u<10;u++)e.Renderer.textures.push({pic:s.pics.select_server_hover,pos:{x:180,y:150+45*u},hover:!0}),e.Renderer.texts.push({text:"",pos:{x:640,y:175+45*u},size:16,color:"#000",ctext:i.Multiplayer.getServerInfoFunction(u)}),t.Input.clickEvents.push({s:{x:180,y:150+45*u},e:{x:1101,y:195+45*u},callback:i.Multiplayer.getServerSelectFunction(u)});break;case c.menuState.PlayerSelect:e.Renderer.textures=[{pic:s.pics.player_select_BLURRED,pos:{x:0,y:0}},{pic:s.pics.hero_select_hover,pos:{x:156,y:23},hover:!0},{pic:s.pics.hero_select_hover,pos:{x:560,y:23},hover:!0},{pic:s.pics.hero_select_hover,pos:{x:964,y:23},hover:!0},{pic:s.pics.hero_select_hover,pos:{x:156,y:540},hover:!0},{pic:s.pics.hero_select_hover,pos:{x:560,y:540},hover:!0},{pic:s.pics.hero_select_hover,pos:{x:964,y:540},hover:!0}];var y=60,f={text:""+y,pos:{x:640,y:385},size:70,color:"#000"};e.Renderer.texts=[f,{text:x.SELECT,pos:{x:380,y:372},size:40,color:"#000"},{text:x.HERO,pos:{x:900,y:372},size:40,color:"#000"},{text:x.HEROES.FROG.NAME,pos:{x:240,y:210},size:26,color:"#000"},{text:x.HEROES.FROG.POWER,pos:{x:240,y:240},size:18,color:"#000",multiline:!0},{text:x.HEROES.DOG.NAME,pos:{x:640,y:210},size:26,color:"#000"},{text:x.HEROES.DOG.POWER,pos:{x:640,y:240},size:18,color:"#000",multiline:!0},{text:x.HEROES.CAT.NAME,pos:{x:1040,y:210},size:26,color:"#000"},{text:x.HEROES.CAT.POWER,pos:{x:1040,y:240},size:18,color:"#000",multiline:!0},{text:x.HEROES.CHICK.NAME,pos:{x:240,y:520},size:26,color:"#000"},{text:x.HEROES.CHICK.POWER,pos:{x:240,y:490},size:18,color:"#000",multiline:!0},{text:x.HEROES.FISH.NAME,pos:{x:640,y:520},size:26,color:"#000"},{text:x.HEROES.FISH.POWER,pos:{x:640,y:490},size:18,color:"#000",multiline:!0},{text:x.HEROES.MONKEY.NAME,pos:{x:1040,y:520},size:26,color:"#000"},{text:x.HEROES.MONKEY.POWER,pos:{x:1040,y:490},size:18,color:"#000",multiline:!0}];var m=setInterval(function(){if(y>0)y--,f.text=""+y,a.GameState.running&&(f.text=x.WAITING,clearInterval(m));else{if(a.GameState.running)return void clearInterval(m);o.Game.startMatch(n.Heroes.getRandomHero())}},1e3);t.Input.clickEvents=[{s:{x:140,y:25},e:{x:340,y:245},callback:function(){o.Game.startMatch(n.Heroes.list.FROG)}},{s:{x:540,y:25},e:{x:740,y:245},callback:function(){o.Game.startMatch(n.Heroes.list.DOG)}},{s:{x:940,y:25},e:{x:1140,y:245},callback:function(){o.Game.startMatch(n.Heroes.list.CAT)}},{s:{x:140,y:540},e:{x:340,y:690},callback:function(){o.Game.startMatch(n.Heroes.list.CHICK)}},{s:{x:540,y:540},e:{x:740,y:690},callback:function(){o.Game.startMatch(n.Heroes.list.FISH)}},{s:{x:940,y:540},e:{x:1140,y:690},callback:function(){o.Game.startMatch(n.Heroes.list.MONKEY)}}];break;case c.menuState.SinglePlayerGame:case c.menuState.MPGame:t.Input.escPressed=!1,e.Renderer.textures=[{pic:s.pics.blurred_bg,pos:{x:0,y:0}},{pic:s.pics.battle_top,pos:{x:0,y:0}},{pic:a.GameState.player.hero.pic,pos:{x:562,y:540}},{pic:a.GameState.opponent.hero.pic,pos:{x:562,y:55}},{pic:s.pics.hero_hover_up,pos:{x:560,y:495},hover:!0},{pic:s.pics.hero_hover_down,pos:{x:560,y:150},hover:!0},{pic:s.pics.atk_btn_hover,pos:{x:5,y:530},hover:!0},{pic:s.pics.def_btn_hover,pos:{x:5,y:625},hover:!0},{pic:s.pics.atk_btn_hover,pos:{x:5,y:530},condition:function(){return a.GameState.matchtype==c.gameType.MultiPlyaer&&a.GameState.player.isAttacking}},{pic:s.pics.def_btn_hover,pos:{x:5,y:625},condition:function(){return a.GameState.matchtype==c.gameType.MultiPlyaer&&a.GameState.player.isDefending}},{pic:s.pics.upg_btn_hover,pos:{x:215,y:540},hover:!0},{pic:s.pics.upg_btn_hover,pos:{x:215,y:635},hover:!0},{pic:s.pics.upg_btn_hover,pos:{x:385,y:540},hover:!0},{pic:s.pics.upg_btn_hover,pos:{x:385,y:635},hover:!0},{pic:s.pics.blurred_bg,pos:{x:0,y:0},condition:function(){return t.Input.escPressed},mod:{opacity:.6}},{pic:s.pics.button_main,pos:{x:380,y:320},condition:function(){return t.Input.escPressed}},this.MTextures.PlayerShield,this.MTextures.OpponentShield,this.MTextures.PlayerSword,this.MTextures.OpponentSword];var h={text:"",pos:{x:640,y:385},size:70,color:"#fff",ctext:function(){return a.GameState.matchtype==c.gameType.MultiPlyaer&&a.GameState.matchturn==c.turn.Upgrade?""+a.GameState.turnTimer:""}};e.Renderer.texts=[{text:"",pos:{x:1240,y:592},size:20,color:"#5f220a",ctext:function(){return""+Math.ceil(a.GameState.player.animHP)}},{text:"",pos:{x:720,y:32},size:14,color:"#5f220a",ctext:function(){return""+Math.ceil(a.GameState.opponent.animHP)}},{text:"",pos:{x:1240,y:675},size:20,color:"#5f220a",ctext:function(){return""+Math.ceil(a.GameState.player.animMana)}},{text:"",pos:{x:130,y:590},size:26,color:"#fff",ctext:function(){return""+a.GameState.player.attack}},{text:"",pos:{x:130,y:685},size:26,color:"#fff",ctext:function(){return""+a.GameState.player.defense}},{text:"ATK +10%",pos:{x:275,y:590},size:22,color:"#fff"},{text:"5M",pos:{x:350,y:587},size:14,color:"#2196F3"},{text:"DEF +10%",pos:{x:275,y:684},size:22,color:"#fff"},{text:"5M",pos:{x:350,y:681},size:14,color:"#2196F3"},{text:"ATK +5%\nDEF +5%",pos:{x:442,y:580},size:22,color:"#fff",multiline:!0},{text:"5M",pos:{x:520,y:587},size:14,color:"#2196F3"},{text:"SPECIAL",pos:{x:442,y:684},size:22,color:"#fff"},{text:"",pos:{x:520,y:681},size:14,color:"#2196F3",ctext:function(){return a.GameState.player.hero.specialCost+"M"}},h,this.MTexts.PlayerDamageRecieved,this.MTexts.PlayerDefenseBlocked,this.MTexts.PlayerHPDiff,this.MTexts.OpponentDamageRecieved,this.MTexts.OpponentDefenseBlocked,this.MTexts.OpponentHPDiff,{text:"",ctext:function(){return t.Input.escPressed?x.BACK:""},pos:{x:640,y:372},size:30,color:"#5f220a"},{text:"",ctext:function(){return a.GameState.matchturn==c.turn.Battle?x.BATTLE:x.UPGRADE},pos:{x:45,y:15},size:14,color:"#fff"},{text:"",ctext:function(){return a.GameState.matchtype==c.gameType.MultiPlyaer?i.Multiplayer.nickname:""},pos:{x:640,y:713},size:12,color:"#5f220a"},{text:"",ctext:function(){return a.GameState.matchtype==c.gameType.MultiPlyaer?i.Multiplayer.room.opponentName:""},pos:{x:640,y:52},size:12,color:"#5f220a"}],t.Input.clickEvents=[{s:{x:220,y:550},e:{x:370,y:615},callback:function(){o.Game.atkBuff(a.GameState.player)}},{s:{x:220,y:640},e:{x:370,y:710},callback:function(){o.Game.defBuff(a.GameState.player)}},{s:{x:390,y:550},e:{x:540,y:615},callback:function(){o.Game.atkdefBuff(a.GameState.player)}},{s:{x:390,y:640},e:{x:540,y:710},callback:function(){o.Game.special(a.GameState.player)}},{s:{x:20,y:540},e:{x:90,y:615},callback:function(){o.Game.attack(a.GameState.player)}},{s:{x:20,y:640},e:{x:90,y:710},callback:function(){o.Game.defend(a.GameState.player)}},{s:{x:380,y:320},e:{x:897,y:402},callback:function(){t.Input.escPressed&&(a.GameState.matchtype==c.gameType.MultiPlyaer&&i.Multiplayer.destroyRoom(),l.changeState(c.menuState.MainMenu))}}],e.Renderer.shapes=[{pos:{x:745,y:555},w:function(){return r.Utils.calcPixels(a.GameState.player.animHP,a.GameState.player.maxHP,530)},h:58,color:"#b71c1c"},{pos:{x:538,y:18},w:function(){return r.Utils.calcPixels(a.GameState.opponent.animHP,a.GameState.opponent.maxHP,204)},h:18,color:"#b71c1c"},{pos:{x:745,y:638},w:function(){return r.Utils.calcPixels(a.GameState.player.animMana,a.GameState.player.maxMana,530)},h:58,color:"#2196F3"}]}this.currentState=p}},s.pics={},s.MTextures={},s.MTexts={},s.currentState=c.menuState.MainMenu,s}();exports.View=f;
},{"./renderer.js":"b7LN","./input.js":"efjR","./heroes.js":"O7Ru","./game.js":"QcRT","./gamestate.js":"NZ5N","./utils.js":"FOZT","./multiplayer.js":"EPKu","./enums.js":"Ze5K","./locale.js":"nKWc"}],"cGmI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=void 0;var e=require("./view.js"),t=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(u,a)}c((r=r.apply(e,t||[])).next())})},n=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},r=function(){function r(){}return r.init=function(){return t(this,void 0,void 0,function(){return n(this,function(e){return[2,Promise.all([this.loadTextures()])]})})},r.loadTextures=function(){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return[4,fetch("./meta/textures.json").then(function(e){return e.json()}).then(function(e){return e})];case 1:return t=n.sent(),[2,e.View.loadPics(t)]}})})},r}();exports.Loader=r;
},{"./view.js":"hDRN"}],"BK5V":[function(require,module,exports) {
"use strict";var e=require("./loader.js"),r=require("./game.js");e.Loader.init().then(function(e){r.Game.start()});
},{"./loader.js":"cGmI","./game.js":"QcRT"}]},{},["BK5V"], null)